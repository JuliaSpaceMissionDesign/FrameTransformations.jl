<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Use Case: Custom spacecraft orbit · FrameTransformations.jl</title><meta name="title" content="Use Case: Custom spacecraft orbit · FrameTransformations.jl"/><meta property="og:title" content="Use Case: Custom spacecraft orbit · FrameTransformations.jl"/><meta property="twitter:title" content="Use Case: Custom spacecraft orbit · FrameTransformations.jl"/><meta name="description" content="Documentation for FrameTransformations.jl."/><meta property="og:description" content="Documentation for FrameTransformations.jl."/><meta property="twitter:description" content="Documentation for FrameTransformations.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="FrameTransformations.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">FrameTransformations.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../../Tutorials/gen/t00_frames/">01 - Frame System</a></li><li><a class="tocitem" href="../../../Tutorials/gen/t01_rotation/">02 - Rotation</a></li><li><a class="tocitem" href="../../../Tutorials/gen/t02_axes/">03 - Axes</a></li><li><a class="tocitem" href="../../../Tutorials/gen/t03_points/">04 - Points</a></li></ul></li><li><a class="tocitem" href="../../../benchmarks/">Benchmarks</a></li><li><span class="tocitem">API</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Public API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../API/frames_api/">Frames</a></li><li><a class="tocitem" href="../../../API/axes_api/">Axes</a></li><li><a class="tocitem" href="../../../API/point_api/">Points</a></li><li><a class="tocitem" href="../../../API/dir_api/">Directions</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Use Case: Custom spacecraft orbit</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Use Case: Custom spacecraft orbit</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSpaceMissionDesign/FrameTransformations.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSpaceMissionDesign/FrameTransformations.jl/blob/main/docs/src/Examples/e03_customorb.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="example_03_orb"><a class="docs-heading-anchor" href="#example_03_orb">Use Case: Custom spacecraft orbit</a><a id="example_03_orb-1"></a><a class="docs-heading-anchor-permalink" href="#example_03_orb" title="Permalink"></a></h1><p><em>This example was generated on 2024-05-31T10:00:28.419.</em></p><p>Once the general structure of the <a href="../../../API/frames_api/#FrameTransformations.FrameSystem"><code>FrameSystem</code></a> is understood, we can pass to a use case in which we want to build and exploit our frame system to perform computations inserting a custom orbit. This becomes especially crucial in complex cases like Trajectory Optimization and Navigation Analysis.</p><p>In such scenarios, the trajectory is under design, and the trajectory information might not be completely available. Moreover, in these cases derivatives could be required for various quantities such as time, states, and parameters.</p><p>In this context, we shall remember that <code>FrameTransformations</code> is able to perform operations, including AD, on the frames <strong>independent variable</strong>, e.g. only time.</p><p>A proper orbit representation is essential to avoid perturbation confusion and ensure proper custom orbit handling. For this purpose, two point types can seems suitable: <code>updatable</code> and <code>dynamical</code> points. In this case, however, <code>updatable</code> points are not well-suited as they are essentially constants for the AD system. Then, <code>dynamical</code> points can effectively handle this scenario.</p><h3 id="Frame-system-setup"><a class="docs-heading-anchor" href="#Frame-system-setup">Frame system setup</a><a id="Frame-system-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Frame-system-setup" title="Permalink"></a></h3><p>First of all, a new <a href="../../../API/frames_api/#FrameTransformations.FrameSystem"><code>FrameSystem</code></a> shall be created.</p><pre><code class="language-julia hljs">using FrameTransformations

G = FrameSystem{4, Float64}()

add_axes_icrf!(G)
add_point_root!(G, :Earth, 399, 1)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>As the orbit considered in this example is custom, there is no requirement to load ephemeris.</p></div></div><h3 id="Custom-orbit-model"><a class="docs-heading-anchor" href="#Custom-orbit-model">Custom orbit model</a><a id="Custom-orbit-model-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-orbit-model" title="Permalink"></a></h3><p>A custom orbit model is then required. In this case two dummy orbits are created and stored in a <code>CubicSpline</code> object.</p><pre><code class="language-julia hljs">using JSMDInterfaces.Math: interpolate
using JSMDUtils.Math: InterpCubicSplines

c = 2π/86400
de = 0:3600:2*86400;
fv(t) = [cos(c*t), sin(c*t), 0, -c*sin(c*t), c*cos(c*t), 0];
fv2(t) = [sin(c*t), cos(c*t), 0];
const ORB1 = InterpCubicSplines(de, hcat([fv(e) for e in de]...));
const ORB2 = InterpCubicSplines(de, hcat([fv2(e) for e in de]...));</code></pre><h3 id="Custom-orbit-handling"><a class="docs-heading-anchor" href="#Custom-orbit-handling">Custom orbit handling</a><a id="Custom-orbit-handling-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-orbit-handling" title="Permalink"></a></h3><p>Given the custom orbit model, <a href="../../../API/point_api/#FrameTransformations.add_point_dynamical!"><code>add_point_dynamical!</code></a> could be used to link it to the frame system.</p><p>Insert dynamical points</p><pre><code class="language-julia hljs">add_point_dynamical!(G, :SC1, -1, 399, 1, t-&gt;interpolate(ORB1, t)[1:3], t-&gt;interpolate(ORB1, t))
add_point_dynamical!(G, :SC2, -2, 399, 1, t-&gt;interpolate(ORB2, t))</code></pre><p>Once in the frame system, AD could be exploited to retrieve states+gradients w.r.t. time in any registered frame:</p><pre><code class="language-julia hljs">vector12(G, 399, -1, 1, 12345.0)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12-element StaticArraysCore.SVector{12, Float64} with indices SOneTo(12):
  0.6234251537650443
  0.7819190317829632
  0.0
 -5.68627566192454e-5
  4.533675655396644e-5
  0.0
 -3.3348312757462196e-9
 -4.123692961414662e-9
  0.0
  3.420257054963752e-13
 -2.3479215811169304e-13
  0.0</code></pre><p>It is also possible to use the computational graph to compute quantities between completely custom states representations:</p><pre><code class="language-julia hljs">vector12(G, -1, -2, 1, 12345.0)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12-element StaticArraysCore.SVector{12, Float64} with indices SOneTo(12):
  0.15849387801791892
 -0.15849387801791892
 -0.0
  0.0001021927816025746
 -0.00010221185001107677
 -0.0
 -7.888616856684427e-10
  7.888616856684427e-10
 -0.0
 -5.768178636080682e-13
  5.768178636080682e-13
 -0.0</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Friday 13 September 2024 11:02">Friday 13 September 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
